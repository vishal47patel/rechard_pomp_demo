(function(n){var o={},i,d,k,a=n.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),f=false;n.tooltip={blocked:false,defaults:{delay:200,fade:false,showURL:true,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){n.tooltip.blocked=!n.tooltip.blocked}};n.fn.extend({tooltip:function(p){p=n.extend({},n.tooltip.defaults,p);l(p);return this.each(function(){n.data(this,"tooltip",p);this.tOpacity=o.parent.css("opacity");this.tooltipText=this.title;n(this).removeAttr("title");this.alt=""}).mouseover(c).mouseout(e).click(e)},fixPNG:a?function(){return this.each(function(){var p=n(this).css("backgroundImage");if(p.match(/^url\(["']?(.*\.png)["']?\)$/i)){p=RegExp.$1;n(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+p+"')"}).each(function(){var q=n(this).css("position");if(q!="absolute"&&q!="relative"){n(this).css("position","relative")}})}})}:function(){return this},unfixPNG:a?function(){return this.each(function(){n(this).css({filter:"",backgroundImage:""})})}:function(){return this},hideWhenEmpty:function(){return this.each(function(){n(this)[n(this).html()?"show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}});function l(p){if(o.parent){return}o.parent=n('<div id="'+p.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body).hide();if(n.fn.bgiframe){o.parent.bgiframe()}o.title=n("h3",o.parent);o.body=n("div.body",o.parent);o.url=n("div.url",o.parent)}function h(p){return n.data(p,"tooltip")}function b(p){if(h(this).delay){k=setTimeout(m,h(this).delay)}else{m()}f=!!h(this).track;n(document.body).bind("mousemove",g);g(p)}function c(){if(n.tooltip.blocked||this==i||(!this.tooltipText&&!h(this).bodyHandler)){return}i=this;d=this.tooltipText;if(h(this).bodyHandler){o.title.hide();var s=h(this).bodyHandler.call(this);if(s.nodeType||s.jquery){o.body.empty().append(s)}else{o.body.html(s)}o.body.show()}else{if(h(this).showBody){var r=d.split(h(this).showBody);o.title.html(r.shift()).show();o.body.empty();for(var p=0,q;(q=r[p]);p++){if(p>0){o.body.append("<br/>")}o.body.append(q)}o.body.hideWhenEmpty()}else{o.title.html(d).show();o.body.hide()}}if(h(this).showURL&&n(this).url()){o.url.html(n(this).url().replace("http://","")).show()}else{o.url.hide()}o.parent.addClass(h(this).extraClass);if(h(this).fixPNG){o.parent.fixPNG()}b.apply(this,arguments)}function m(){k=null;if((!a||!n.fn.bgiframe)&&h(i).fade){if(o.parent.is(":animated")){o.parent.stop().show().fadeTo(h(i).fade,i.tOpacity)}else{o.parent.is(":visible")?o.parent.fadeTo(h(i).fade,i.tOpacity):o.parent.fadeIn(h(i).fade)}}else{o.parent.show()}g()}function g(p){if(n.tooltip.blocked){return}if(p&&p.target.tagName=="OPTION"){return}if(!f&&o.parent.is(":visible")){n(document.body).unbind("mousemove",g)}if(i==null){n(document.body).unbind("mousemove",g);return}o.parent.removeClass("viewport-right").removeClass("viewport-bottom");var q=o.parent[0].offsetLeft;var t=o.parent[0].offsetTop;if(p){q=p.pageX+h(i).left;t=p.pageY+h(i).top;var u="auto";if(h(i).positionLeft){u=n(window).width()-q;q="auto"}o.parent.css({left:q,right:u,top:t})}var r=j(),s=o.parent[0];if(r.x+r.cx<s.offsetLeft+s.offsetWidth){q-=s.offsetWidth+20+h(i).left;o.parent.css({left:q+"px"}).addClass("viewport-right")}if(r.y+r.cy<s.offsetTop+s.offsetHeight){t-=s.offsetHeight+20+h(i).top;o.parent.css({top:t+"px"}).addClass("viewport-bottom")}}function j(){return{x:n(window).scrollLeft(),y:n(window).scrollTop(),cx:n(window).width(),cy:n(window).height()}}function e(q){if(n.tooltip.blocked){return}if(k){clearTimeout(k)}i=null;var p=h(this);function r(){o.parent.removeClass(p.extraClass).hide().css("opacity","")}if((!a||!n.fn.bgiframe)&&p.fade){if(o.parent.is(":animated")){o.parent.stop().fadeTo(p.fade,0,r)}else{o.parent.stop().fadeOut(p.fade,r)}}else{r()}if(h(this).fixPNG){o.parent.unfixPNG()}}})(jQuery);