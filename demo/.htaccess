Options -Indexes
Options +FollowSymLinks -MultiViews
RewriteEngine On
AddDefaultCharset UTF-8


RewriteCond %{HTTPS} off
# First rewrite to HTTPS:
# Don't put www. here. If it is already there it will be included, if not
# the subsequent rule will catch it.
RewriteRule .* https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]


RewriteRule \.(nct)$ - [F]

### INSTALL ###
RewriteRule ^(install)/?$ install-nct/install.php [L]
RewriteRule ^(installdb)/?$ install-nct/install_db.php [L]
RewriteRule ^(verify)/?$ install-nct/verifyconfig.php [L]

##########      HOME      #########

RewriteRule ^/?$ modules-nct/home-nct/index.php [L]

### SIGN UP ###
RewriteRule ^(sign-up|registration)/?$ modules-nct/registration-nct/index.php [L]
RewriteRule ^(sign-up|registration)/(customer|provider)?$ modules-nct/registration-nct/index.php?user_type=$2 [L]

### SIGN IN ###
RewriteRule ^(sign-in|login)/?$ modules-nct/login-nct/index.php [L]
RewriteRule ^second-step?$ modules-nct/second_step-nct/index.php [L]
RewriteRule ^second-step/?$ modules-nct/second_step-nct/index.php [L]

### SIGN OUT ###
RewriteRule ^(sign-out|logout)/?$ modules-nct/logout-nct/index.php [L]

## For content static pages ##
RewriteRule ^content/([A-Za-z0-9._-]+)/?$ modules-nct/content-nct/index.php?slug=$1
RewriteRule ^content/([A-Za-z0-9._-]+)/viewType/([A-Za-z0-9._-]+)?$ modules-nct/content-nct/index.php?slug=$1&viewType=$2

## For ContactUs ##
RewriteRule ^contact-us/?$  modules-nct/contact_us-nct/index.php

## For Account Setting ##
RewriteRule ^account-setting/?$  modules-nct/account_setting-nct/index.php


## For Edit Profile ##
RewriteRule ^edit-profile/?$  modules-nct/edit_profile-nct/index.php

## For Profile ##
RewriteRule ^profile/([0-9]+)/?$  modules-nct/profile-nct/index.php?userId=$1

#### Activate Account #####
RewriteRule ^activate-account/([^./]+)/?$ modules-nct/login-nct/index.php?action=activation&emailVerifyCode=$1 [QSA,L]

### Forgot Password ###
RewriteRule ^(forgot-pass)/?$ modules-nct/forgot_pass-nct/index.php [L]
RewriteRule ^(forgot-pass)?$ modules-nct/forgot_pass-nct/index.php [L]

### My provided services ###
RewriteRule ^my-provided-services/?$ modules-nct/my_provided_services-nct/index.php [L]
RewriteRule ^my-provided-services?$ modules-nct/my_provided_services-nct/index.php [L]

### My received reviews ###
RewriteRule ^my-received-reviews/?$ modules-nct/my_received_reviews-nct/index.php [L]
RewriteRule ^my-received-reviews?$ modules-nct/my_received_reviews-nct/index.php [L]

### My given reviews ###
RewriteRule ^my-given-reviews/?$ modules-nct/my_given_reviews-nct/index.php [L]
RewriteRule ^my-given-reviews?$ modules-nct/my_given_reviews-nct/index.php [L]

###  New Service Request ###
RewriteRule ^new-service-request/?$ modules-nct/new_service_request-nct/index.php [L]
RewriteRule ^new-service-request?$ modules-nct/new_service_request-nct/index.php [L]

###  My Service Request ###
RewriteRule ^my-service-request/?$ modules-nct/my_service_request-nct/index.php [L]
RewriteRule ^my-service-request?$ modules-nct/my_service_request-nct/index.php [L]

## For reset password ##
RewriteRule ^reset_password/([^/]*)/([^/]*)/?$  modules-nct/resetPass-nct/index.php?userId=$1&activationCode=$2&action=reset_password

## For Search Provider ##
RewriteRule ^search/?$  modules-nct/search-nct/index.php [L]
RewriteRule ^search?$  modules-nct/search-nct/index.php [L]

## For service book detail ##
RewriteRule ^service-book/?$  modules-nct/service_book-nct/index.php [L]
RewriteRule ^service-book?$  modules-nct/service_book-nct/index.php [L]

## For add service request ##
RewriteRule ^service-request/?$  modules-nct/service_request-nct/index.php [L]
RewriteRule ^service-request?$  modules-nct/service_request-nct/index.php [L]
RewriteRule ^service-request/([0-9]+)/?$  modules-nct/service_request-nct/index.php?provider_id=$1 [L]
RewriteRule ^service-request/([0-9]+)?$  modules-nct/service_request-nct/index.php?provider_id=$1 [L]

## Provider - For add service request ##
RewriteRule ^provider-service-request/?$  modules-nct/provider_added_request-nct/index.php [L]
RewriteRule ^provider-service-request?$  modules-nct/provider_added_request-nct/index.php [L]
RewriteRule ^provider-service-request/([0-9]+)/?$  modules-nct/provider_added_request-nct/index.php?customer_id=$1 [L]
RewriteRule ^provider-service-request/([0-9]+)?$  modules-nct/provider_added_request-nct/index.php?customer_id=$1 [L]

## For service request detail ##
RewriteRule ^service-detail/?$  modules-nct/service_detail-nct/index.php [L]
RewriteRule ^service-detail?$  modules-nct/service_detail-nct/index.php [L]
RewriteRule ^service-detail/([0-9]+)/?$  modules-nct/service_detail-nct/index.php?request_id=$1 [L]
RewriteRule ^service-detail/([0-9]+)?$  modules-nct/service_detail-nct/index.php?request_id=$1 [L]

## For payment ##
RewriteRule ^thankyou/?$  modules-nct/thankyou.php [L,QSA]
RewriteRule ^notify/?$  modules-nct/notify.php [L,QSA]
RewriteRule ^failed/([a-zA-Z0-9=_\-]+)/?$  modules-nct/failed.php?bookingId=$1 [L,QSA]

## message room ##
RewriteRule ^message-room/?$  modules-nct/message-nct/index.php [L,QSA]
RewriteRule ^message-room/([0-9]+)?$  modules-nct/message-nct/index.php?receiverId=$1 [L,QSA]
RewriteRule ^message-room/sender/([^.]+)?$  modules-nct/message-nct/index.php?senderType=mizutech&sendername=$1 [L,QSA]

### Payment history ###
RewriteRule ^payment-history/?$ modules-nct/payment_history-nct/index.php [L]
RewriteRule ^payment-history?$ modules-nct/payment_history-nct/index.php [L]

## App payment web view ##

RewriteRule ^app-payment/([a-zA-Z0-9=_\-]+)/?$  templates-nct/paypal-app-form-nct.tpl.php?payment_history_id=$1 [QSA,L]


##delete account 7-MAy-18
RewriteRule ^delete-account/?$  modules-nct/account_setting-nct/index.php?action=deleteAccount [L,QSA]
##delete account 7-MAy-18

# download attachment#
RewriteRule ^download-attachment/(.*)/?$  includes-nct/download-attachment-nct.php?id=$1  [L]

##admin side manage user redeem reqeust 11-June-18

RewriteRule ^redeem-thankyou/([0-9]+)/?$  admin-nct/modules-nct/redeem_request-nct/redeem-thankyou.php?id=$1 [L,QSA]
RewriteRule ^redeem-notify/?$  admin-nct/modules-nct/redeem_request-nct/redeem-notify.php [L,QSA]
RewriteRule ^redeem-failed/([a-zA-Z0-9=_\-]+)/?$  admin-nct/modules-nct/redeem_request-nct/redeem-failed.php?paymentId=$1 [L,QSA]

##admin side manage user redeem reqeust 11-June-18

## Web services

RewriteRule ^ws-login/?$  ws-nct/login.php [QSA,L]
RewriteRule ^ws-signup/?$  ws-nct/registration.php [QSA,L]
RewriteRule ^ws-profile/?$  ws-nct/profile.php [QSA,L]
RewriteRule ^ws-account_setting/?$  ws-nct/account_setting.php [QSA,L]
RewriteRule ^ws-home/?$  ws-nct/home.php [QSA,L]
RewriteRule ^ws-content/?$  ws-nct/content.php [QSA,L]
RewriteRule ^ws-edit-profile/?$  ws-nct/edit_profile.php [QSA,L]
RewriteRule ^ws-search/?$  ws-nct/search.php [QSA,L]
RewriteRule ^ws-my-provided-serices/?$  ws-nct/my_provided_serices.php [QSA,L]
RewriteRule ^ws-my-received-reviews/?$  ws-nct/my_received_reviews.php [QSA,L]
RewriteRule ^ws-my-given-reviews/?$  ws-nct/my_given_reviews.php [QSA,L]
RewriteRule ^ws-new-service-request/?$  ws-nct/new_service_request.php [QSA,L]
RewriteRule ^ws-my-service-request/?$  ws-nct/my_service_request.php [QSA,L]
RewriteRule ^ws-service-book/?$  ws-nct/service_book.php [QSA,L]
RewriteRule ^ws-service-request/?$  ws-nct/service_request.php [QSA,L]
RewriteRule ^ws-service-detail/?$  ws-nct/service_detail.php [QSA,L]
RewriteRule ^ws-message/?$  ws-nct/message.php [QSA,L]
RewriteRule ^ws-payment-history/?$  ws-nct/payment_history.php [QSA,L]
RewriteRule ^ws-provider-service-request/?$  ws-nct/provider_service_request.php [QSA,L]

###New currency api 20-Nov-2018 ###
RewriteRule ^ws-getAllLanguage/?$  ws-nct/language_and_currency.php [QSA,L]
RewriteRule ^ws-changeLanguage/?$  ws-nct/language_and_currency.php [QSA,L]
###New currency api 20-Nov-2018 ###

RewriteRule ^ws-other/?$  ws-nct/other.php [QSA,L]
RewriteRule ^ws-slot-calendar/?$  slot_load.php [QSA,L]
RewriteRule ^ws-day-calendar/?$  day_load.php [QSA,L]

#for live site
#ErrorDocument 404 /404.php

ErrorDocument 403  /404.php

#for local site
ErrorDocument 404 /demo-admin/404.php

# ADMIN PANEL
RewriteRule ^admin-nct/modules-nct/constant-nct/(pages|labels|messages)/?$ admin-nct/modules-nct/constant-nct/index.php?ctype=$1 [L,QSA]

AddDefaultCharset UTF-8

<FilesMatch "\.(html?|txt|css|js|php|ico|jpe?g|png|gif|JPE?G|PNG|GIF|swf|woff|ttf|svt|eot)$">
    SetOutputFilter DEFLATE
</FilesMatch>
<ifModule mod_expires.c>
  ExpiresActive On
  ExpiresDefault A300
  # Expires after 1 month
  ExpiresByType image/gif A2592000
  ExpiresByType image/png A2592000
  ExpiresByType image/jpg A2592000
  ExpiresByType image/jpeg A2592000
  ExpiresByType image/x-icon A2592000
  ExpiresByType application/pdf A2592000
  ExpiresByType application/javascript A2592000
  ExpiresByType application/x-javascript A2592000
  ExpiresByType text/plain A2592000
  ExpiresByType text/css A2592000
  ExpiresByType font/ttf A2592000
  ExpiresByType font/woff A2592000
  ExpiresByType application/x-font-ttf A2592000
  ExpiresByType application/x-font-woff A2592000
</ifModule>
<IfModule mod_headers.c>
  <filesMatch "\.(css|ico|jpg|jpeg|png|gif|swf|woff|ttf|svt|eot)$">
    Header set Cache-Control "public, no-transform"
  </filesMatch>
  <filesMatch "\.(js)$">
    Header set Cache-Control "private"
  </filesMatch>
  <filesMatch "\.(x?html?|php|html?)$">
    Header set Cache-Control "max-age=7200, private, must-revalidate"
  </filesMatch>
</IfModule>

<ifModule mod_gzip.c>
  mod_gzip_on Yes
  mod_gzip_dechunk Yes
  mod_gzip_item_include file \.(html?|txt|css|js|php|pl|jpg|gif|png|JPG|JPEG|GIF|PNG|jpeg|woff|ttf|svt)$
  mod_gzip_item_include handler ^cgi-script$
  mod_gzip_item_include mime ^text/.*
  mod_gzip_item_include mime ^application/x-javascript.*
  mod_gzip_item_exclude mime ^image/.*
  mod_gzip_item_exclude application/x-font-ttf
  mod_gzip_item_exclude application/x-font-woff
  mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</ifModule>

FileETag None
#Header set X-UA-Compatible "IE=edge,chrome=1"
php_value session.gc_maxlifetime 86400
php_value session.gc_divisor 1
php_value session.cookie_lifetime 86400
php_value session.gc_probability 1